# Кроссплатформенный медиаплеер "Together" с функцией cовместного просмотра

## Введение

Цель проекта — разработка кроссплатформенного медиаплеера "Together", который позволяет пользователям синхронно просматривать видео и слушать аудио, находясь в разных местах. Ключевые особенности приложения:

- **Отсутствие сторонних серверов**: Все данные передаются напрямую между пользователями без использования каких-либо внешних серверов.
- **Выбор метода доставки контента**: Пользователи могут заранее скачать контент от хоста или получать его через потоковую передачу в реальном времени.

Приложение поддерживает локальные файлы и контент с популярных видеохостингов. Оно работает на Windows и Linux, обеспечивая широкую доступность.

## Основная функциональность

### Совместный просмотр

- **Виртуальные комнаты**: Пользователи создают комнаты для совместного просмотра или прослушивания контента.
- **Роль хоста**: Хост выбирает медиафайл или ссылку на контент с видеохостинга.
- **Синхронизация воспроизведения**: Воспроизведение контента синхронизируется между всеми участниками комнаты.

### Методы доставки контента

- **Локальные файлы**:
  - **Загрузка**: Участники могут скачать файл напрямую с устройства хоста перед началом воспроизведения.
  - **Потоковая передача**: Участники могут получать потоковую передачу контента от хоста без предварительной загрузки.
- **Контент с видеохостингов**:
  - **Синхронизация через API**: Воспроизведение синхронизируется с использованием официальных API поддерживаемых платформ (YouTube, Twitch и другие, включая локальные сервисы).

## Технологический стек

### Front-end

- **Язык программирования**: JavaScript
- **Фреймворк**: Svelte
- **Сборщик**: Vite
- **Медиа-плеер**: Video.js (возможны альтернативы: Plyr, MediaElement.js)
- **Разметка и стилизация**: HTML и CSS

### Back-end

- **Язык программирования**: C++
- **Сборщик**: CMake
- **Библиотеки и фреймворки**:
  - **libwebrtc**: Для реализации WebRTC и обеспечения P2P-соединений.
  - **Drogon**: Веб-фреймворк для RESTful API и серверной логики.
- **Безопасность**: OpenSSL для SSL/TLS шифрования.
- **Контроль версий**: Git

## Сетевые технологии и безопасность

### P2P-соединения без сторонних серверов

- **WebRTC**: Используется для установления прямых P2P-соединений между пользователями.
- **Отсутствие STUN/TURN-серверов**: Приложение не использует внешние серверы для обхода NAT и фаерволов.
- **Настройка соединения**: Пользователи самостоятельно настраивают фаерволы и роутеры для обеспечения связи.

### Синхронизация и передача данных

- **Синхронизация воспроизведения**:
  - Время воспроизведения передается от хоста участникам раз в секунду.
  - При отклонении более 0,5 секунд система уведомляет пользователя и предлагает коррекцию.
  - Автоматическая плавная коррекция предотвращает резкие скачки.
- **Потоковая передача контента**:
  - Хост может транслировать медиа в реальном времени через WebRTC.
  - Адаптивное качество обеспечивает стабильное воспроизведение при различных скоростях интернета.

### Безопасность соединений

- **Шифрование данных**: Использование SSL/TLS через OpenSSL для защиты передаваемых данных.
- **Приватные комнаты**:
  - Доступ по паролю или уникальной ссылке.
  - Уникальные идентификаторы сессий обеспечивают доступ только авторизованным пользователям.

## Пользовательский интерфейс

### Кастомизация

- **Темы интерфейса**: Светлая и темная тема на выбор.
- **Локализация**: Поддержка русского и английского языков с возможностью расширения.

### Чат в комнате

- **Реализация**: Встроенный чат на основе WebSockets.
- **Функции чата**:
  - Отправка текстовых сообщений.
  - Уведомления о новых сообщениях.

## Тестирование и качество

- **Unit-тесты**: Проверка отдельных компонентов и функций.
- **Интеграционные тесты**: Тестирование взаимодействия между фронтендом и бэкендом.
- **Кроссплатформенные тесты**: Проверка на Windows и Linux.
- **Бета-тестирование**: Сбор отзывов от реальных пользователей для улучшения продукта.

## Обход фаерволов и NAT

- **Пользовательская настройка**:
  - Пользователи добавляют приложение в белый список фаервола самостоятельно.
- **Ограничения**:
  - Без использования STUN/TURN-серверов возможность соединения зависит от настроек сети пользователя.
  - Рекомендуется использование прямого подключения к интернету или корректная настройка роутера.
